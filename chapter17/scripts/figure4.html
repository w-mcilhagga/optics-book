  <script src='../../scripts/p5/p5.js'>
</script>
  <script src='../../scripts/p5/p5.svg.js'>
</script>
  <script src='../../scripts/p5/p5.dom.js'>
</script>
  <script src='../../scripts/p5/p5.util.js'>
</script>
  <script src='../../scripts/p5/p5.yup.js'>
</script>
  <script src='../../scripts/vec2d.js'>
</script>
  <script src='../../scripts/raytracing-2/optical_simulation.js'>
</script>
  <script src='../../scripts/raytracing-2/optical_simulation_draw_p5.js'>
</script>

<body></body>
<script>
(function() {

clr = [210,210,255]

let imgpos = 1/(1/(-0.6)+4)+0.1
console.log(imgpos)

arrows = [{pt:[-0.5+0.3,0], dir:[0,1]},
		  {pt:[imgpos-0.2,0], dir:[0,1]}
		  ]
state = {
    w: 700,
    h: 350,
    origin: [
        350,
        350/2
    ],
    ppm: 550,
    background: [0, 61, 92],
	renderer: 'svg',
	
    items: [
        {
            type: 'divergent light',
            id: 'light#1',
            position: [-0.5, 0.25],
            target: 'objective1',
            spread: 'fill*0.8',
            raycount: 4,
            ui: {ylock:true},
            style: {
                stroke: clr,
				strokeWidth: 1,
				arrows: arrows
            }
        },
		{
			type: 'thinlens',
			id: 'objective1',
			position: [0.1,0],
			axis: [1,0],
			aperture: 0.2,
			power: 4,
            style: {
				stroke:[255,255,255],
				strokeWeight:3,
				z_order: 2
			}
		},
		{
			type: 'thinlens',
			id: 'x',
			position: [0.1-0.2,0],
			axis: [1,0],
			aperture: 0.4,
			power: 0,
            style: {
				stroke:[255,255,255],
				strokeWeight:3,
				z_order: 2
			}
		},
		{
			type: 'thinlens',
			id: 'y',
			position: [0.1+0.1,0],
			axis: [1,0],
			aperture: 0.4,
			power: 0,
            style: {
				stroke:[255,255,255],
				strokeWeight:3,
				z_order: 2
			}
		},
		{
			type: 'barrier',
			position: [imgpos, 0.2,imgpos,-0.2]
		}
    ]
}

makeP5App(state)(window)

})()

</script>