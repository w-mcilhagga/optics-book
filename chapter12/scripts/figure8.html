  <script src='../../scripts/p5/p5.js'>
</script>
  <script src='../../scripts/p5/p5.svg.js'>
</script>
  <script src='../../scripts/p5/p5.dom.js'>
</script>
  <script src='../../scripts/p5/p5.util.js'>
</script>
  <script src='../../scripts/p5/p5.yup.js'>
</script>
  <script src='../../scripts/vec2d.js'>
</script>
  <script src='../../scripts/raytracing-2/optical_simulation.js'>
</script>
  <script src='../../scripts/raytracing-2/optical_simulation_draw_p5.js'>
</script>

<body></body>
<script>
(function() {

clr = [180,180,255]
arrows = [{pt:[-0.16,0], dir:[0,1]},
		{pt:[0.2,0], dir:[0,1]},
		{pt:[0.5,0], dir:[0,1]}						
]
dy = 0.15

state = {
    w: 600,
    h: 360,
    origin: [
        270,
        180
    ],
    ppm: 550,
    background: [0, 61, 92],
	renderer: 'svg',
	
    items: [
		{
			type: 'divergent light',
			id: 'l1',
			position: [-0.4,dy],
			target: 'objective1',
			raycount: 7,
			spread: 'fill*0.8',
			style: {
                stroke: clr,
				strokeWidth: 1,
				arrows: [{pt:[-0.1,0], dir:[0,1]},
						{pt:[0.2,0], dir:[0,1]},
						{pt:[0.5,0], dir:[0,1]}						
						]
            }
		},
		{
			type: 'thinlens',
			id: 'objective1',
			position: [0,dy],
			axis: [1,0],
			aperture: 0.2,
			power: 1.5,
			ui: {ylock:true},
            style: {
				stroke:[255,255,255],
				strokeWeight:3,
				z_order: 2
			}
		},
		{
			type: 'thinlens',
			id: 'eyepiece1',
			position: [0+1/1.5-1/3,dy],
			axis: [1,0],
			aperture: 0.12,
			power: -3,
			ui: {ylock:true},
            style: {
				stroke:[255,255,255],
				strokeWeight:3,
				z_order: 2
			}
		},
		{
			type: 'divergent light',
			id: 'l2',
			position: [-0.4,-dy],
			target: 'objective2',
			raycount: 7,
			spread: 'fill*0.8',
			style: {
                stroke: clr,
				strokeWidth: 1,
				arrows: [{pt:[-0.1,0], dir:[0,1]},
						'',
						{pt:[0.2,0], dir:[0,1]},
						{pt:[0.5,0], dir:[0,1]}						
						]
            }
		},
		{
			type:'thinlens',
			id: 'macro',
			position: [-0.05, -dy],
			axis:[1,0],
			aperture: 0.2,
			power: 1/0.35,
            style: {
				stroke:[255,255,255],
				strokeWeight:3
			}
		},
		{
			type: 'thinlens',
			id: 'objective2',
			position: [0,-dy],
			axis: [1,0],
			aperture: 0.2,
			power: 1.5,
			ui: {ylock:true},
            style: {
				stroke:[255,255,255],
				strokeWeight:3
			}
		},
		{
			type: 'thinlens',
			id: 'eyepiece2',
			position: [0+1/1.5-1/3,-dy],
			axis: [1,0],
			aperture: 0.12,
			power: -3,
			ui: {ylock:true},
            style: {
				stroke:[255,255,255],
				strokeWeight:3,
				z_order: 2
			}
		}
    ]
}


makeP5App(state)(window)

})()

</script>