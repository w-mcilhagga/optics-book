<script src='../../scripts/p5/p5.js'></script>
<script src='../../scripts/p5/p5.svg.js'></script>
<script src='../../scripts/p5/p5.util.js'></script>
<script src='../../scripts/p5/p5.yup.js'></script>
<script src='../../scripts/vec2d.js'></script>
<script src='../../scripts/raytracing-2/optical_simulation.js'></script>
<script src='../../scripts/raytracing-2/optical_simulation_draw_p5.js'></script>

<body>
</body>
  <script>
  	let state = {
			w: 520,
			maxWidth: 520,
			h: 260,
			origin: [250, 130],
			background: [100,100,100],
			ppm: 250,
			renderer: 'svg',
			items: [
			{
				type: 'parallel light',
				position: [-1,-0.03],
				target: [0,-0.03],
				raycount: 1,
				spread: 0.9,
				style:{
					strokeWeight: 2,
					arrows:[{pt:[-0.5,0], dir:[0,1]}],
					stroke: [0,255,0]
				}
			},
			{
				type: 'dimension',
				start: [-1,0],
				end: [1.5,0],
				label: ' ',
				style: {
					strokeWeight: 2,
					strokeDash: [3, 8],
					stroke: [255, 255, 255]
				}
			},
			{
				type: 'parallel light',
				position: [-1,0.07],
				target: [0,0],
				raycount: 1,
				spread: 0.9,
				style:{
					strokeWeight: 2,
					arrows:[{pt:[-0.5,0], dir:[0,1]}],
					stroke: [0,255,0]
				}
			},
			{
				type: 'parallel light',
				position: [-1,-0.5],
				target: [0,0],
				raycount: 1,
				spread: 0.9,
				style:{
					strokeWeight: 2,
					arrows:[{pt:[-0.5,0], dir:[0,1]}],
					stroke: [255,0,0]
				}
			},
			{
				type: 'parallel light',
				position: [-1,0.3],
				target: [0,0.3],
				raycount: 1,
				spread: 0.9,
				style:{
					strokeWeight: 2,
					arrows:[{pt:[-0.5,0], dir:[0,1]}],
					stroke: [255,0,0]
				}
			},
			{
				type: 'snell arc',
				position: [0.8,0],
				axis: [-1,0],
				r: 0.8,
				width: 150,
				n_in: 1,
				n_out: 1.5,
				style: {
					z_order: 1,
					strokeWeight: 3,
					fill: [76, 84, 116]
				}
			},
			{
				type: 'p5',
				draw(p5, vbox, ppm) {
					p5.noStroke()
					p5.fill(76,84,116)
					p5.rect(60,vbox[2],400,400)
				},
				style: {
					z_order: 1
				}
			}
			]
		}

	makeP5App(state)(window)
  </script>

